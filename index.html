<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campaign Analysis & Ad Canvas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Include html2canvas for downloading -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .ad-preview {
            aspect-ratio: 1 / 1; /* Square for Feed */
        }
        .ad-preview.stories {
            aspect-ratio: 9 / 16; /* 9:16 for Stories */
        }
    </style>
</head>
<body class="bg-gray-200 p-4 md:p-8">
    <div class="max-w-7xl mx-auto">
        
        <!-- Analysis Section -->
        <div class="mb-8 bg-white p-6 md:p-8 rounded-xl shadow-lg">
            <h1 class="text-3xl font-bold text-gray-900 mb-6">Campaign Analysis & Next Steps</h1>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Left Column: Key Findings -->
                <div class="bg-gray-50 rounded-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Key Findings (Oct 1 - Oct 22)</h2>
                    <ul class="list-disc list-outside space-y-3 text-gray-700 ml-5">
                        <li><span class="font-semibold">Total Spend:</span> 578.17 NOK</li>
                        <li><span class="font-semibold">Total Subscriptions:</span> 2</li>
                        <li><span class="font-semibold">Overall CPA:</span> 289.09 NOK</li>
                        <li class="mt-4 pt-4 border-t border-gray-200"><span class="font-semibold text-green-700">Winning Ad:</span> The <strong class="text-gray-900">`Static #1 - A1/K1`</strong> ad drove <strong class="text-gray-900">100% of the conversions</strong> (2 Subscriptions) for a CPA of 180.90 NOK.</li>
                        <li><span class="font-semibold text-green-700">Winning Audience:</span> Both conversions came from <strong class="text-gray-900">Males aged 35-54</strong>.</li>
                        <li><span class="font-semibold text-green-700">Winning Delivery:</span> 100% of conversions occurred on the <strong class="text-gray-900">Instagram Feed</strong> and were viewed on an <strong class="text-gray-900">iPhone</strong>.</li>
                        <li class="mt-4 pt-4 border-t border-gray-200"><span class="font-semibold text-red-700">Problem 1:</span> The <strong class="text-gray-900">`Video #1 - A1/K1`</strong> ad spent 216.37 NOK (37% of budget) for <strong class="text-gray-900">0 conversions</strong>.</li>
                        <li><span class="font-semibold text-red-700">Problem 2:</span> The <strong class="text-gray-900">Facebook platform</strong> spent 187.15 NOK (32% of budget) for <strong class="text-gray-900">0 conversions</strong>, despite having a *higher* CTR than Instagram. This strongly suggests the tracking issue on the subdomains is causing lost conversions.</li>
                    </ul>
                </div>

                <!-- Right Column: Best Copy & Next Steps -->
                <div class="bg-gray-50 rounded-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Best Performing Copy (by CTR & CPC)</h2>
                    <p class="text-sm text-gray-500 mb-3">(Note: Conversion data was not broken down by copy, so CTR and CPC are our best metrics for engagement.)</p>
                    
                    <h3 class="font-semibold text-gray-900">Best Headlines:</h3>
                    <ul class="list-disc list-outside space-y-2 text-gray-700 ml-5 mb-4">
                        <li><strong class="text-gray-900">"PLAN. TRAIN. SUCCEED."</strong> (4.95% CTR, 1.56 NOK CPC)</li>
                        <li><strong class="text-gray-900">"Try free for 14 days"</strong> (4.75% CTR, 1.71 NOK CPC)</li>
                    </ul>
                    
                    <h3 class="font-semibold text-gray-900">Best Primary Text:</h3>
                    <ul class="list-disc list-outside space-y-2 text-gray-700 ml-5">
                        <li><strong class="text-gray-900">"Get access to our coaching platform for Handball w..."</strong> (5.12% CTR, 1.76 NOK CPC)</li>
                        <li><strong class="text-gray-900">"The video exercises the pros use, now available fo..."</strong> (4.25% CTR, 2.10 NOK CPC)</li>
                    </ul>

                    <h2 class="text-xl font-bold text-gray-800 mb-4 mt-8">Actionable Next Steps</h2>
                    <ul class="list-decimal list-outside space-y-3 text-gray-700 ml-5">
                        <li><strong class="text-gray-900">FIX TRACKING:</strong> This is the #1 priority. We **must** get the GTM snippet and `Subscribe` event tracking implemented on the subdomains (`my.learnhandball.com`, etc.). The Facebook data proves we are losing conversion data.</li>
                        <li><strong class="text-gray-900">OPTIMIZE (Create a "Winner" Ad Set):</strong> Launch a new ad set that doubles down on what works:
                            <ul class="list-disc ml-5 text-sm">
                                <li>**Targeting:** Males 35-54</li>
                                <li>**Placements:** Instagram Feed only</li>
                                <li>**Ads:** Use only the proven `Static #1` ad.</li>
                            </ul>
                        </li>
                        <li><strong class="text-gray-900">TEST (Create a "Test" Ad Set):</strong> Use the new ad concepts below (pre-loaded in the canvas) to test against our winner.
                            <ul class="list-disc ml-5 text-sm">
                                <li>**Test 1:** "Optimized Winner" (Best Image + Best Copy)</li>
                                <li>**Test 2:** "Authority Ad (Gidsel)" (Atle's suggestion)</li>
                                <li>**Test 3:** "Pain Point Solution" (Atle's other suggestion)</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Ad Canvas Section -->
        <h2 class="text-3xl font-bold text-gray-900 mb-6 text-center">Ad Concept Canvas</h2>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Controls -->
            <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-lg">
                <h3 class="text-xl font-bold mb-4">Ad Controls</h3>
                
                <div class="mb-4">
                    <label for="conceptSelect" class="block text-sm font-medium text-gray-700 mb-1">Load Concept:</label>
                    <select id="conceptSelect" class="w-full p-2 border border-gray-300 rounded-md shadow-sm">
                        <option value="0">1. Optimized Winner (Data-Driven)</option>
                        <option value="1">2. Authority Ad (Gidsel)</option>
                        <option value="2">3. Pain Point Solution</option>
                    </select>
                </div>

                <div class="mb-4">
                    <label for="aspectRatio" class="block text-sm font-medium text-gray-700 mb-1">Aspect Ratio:</label>
                    <select id="aspectRatio" class="w-full p-2 border border-gray-300 rounded-md shadow-sm">
                        <option value="square">1:1 (Feed/Square)</option>
                        <option value="stories">9:16 (Stories/Reels)</option>
                    </select>
                </div>

                <div class="mb-4">
                    <label for="imageUrl" class="block text-sm font-medium text-gray-700 mb-1">Image URL:</label>
                    <input type="text" id="imageUrl" class="w-full p-2 border border-gray-300 rounded-md shadow-sm" value="https://placehold.co/1080x1080/334155/E2E8F0?text=Your+Image+Here">
                    <p class="text-xs text-gray-500 mt-1">Tip: Use a real image URL. Try the static ad image.</p>
                </div>

                <div class="mb-4">
                    <label for="logoUrl" class="block text-sm font-medium text-gray-700 mb-1">Logo URL:</label>
                    <input type="text" id="logoUrl" class="w-full p-2 border border-gray-300 rounded-md shadow-sm" value="https://placehold.co/400x100/ffffff/334155?text=LOGO">
                    <p class="text-xs text-gray-500 mt-1">Using a white-bg placeholder. Use Learn Handball's logo.</p>
                </div>

                <div class="mb-4">
                    <label for="headline" class="block text-sm font-medium text-gray-700 mb-1">Headline (H1):</label>
                    <textarea id="headline" rows="3" class="w-full p-2 border border-gray-300 rounded-md shadow-sm"></textarea>
                </div>

                <div class="mb-4">
                    <label for="bullets" class="block text-sm font-medium text-gray-700 mb-1">Value Props (Use â€¢ for bullets):</label>
                    <textarea id="bullets" rows="4" class="w-full p-2 border border-gray-300 rounded-md shadow-sm"></textarea>
                </div>

                <div class="mb-4">
                    <label for="cta" class="block text-sm font-medium text-gray-700 mb-1">CTA Button Text:</label>
                    <input type="text" id="cta" class="w-full p-2 border border-gray-300 rounded-md shadow-sm">
                </div>
                
                <button id="downloadBtn" class="w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200">
                    Download as PNG
                </button>
            </div>

            <!-- Ad Preview -->
            <div class="lg:col-span-2">
                <div id="adPreviewContainer" class="flex items-center justify-center">
                    <div id="adPreview" class="ad-preview w-full max-w-lg bg-gray-700 rounded-lg overflow-hidden shadow-2xl relative">
                        <!-- Background Image -->
                        <img id="previewBgImage" src="https://placehold.co/1080x1080/334155/E2E8F0?text=Your+Image+Here" class="absolute inset-0 w-full h-full object-cover">
                        <!-- Overlay/Scrim -->
                        <div class="absolute inset-0 bg-black bg-opacity-30"></div>
                        
                        <!-- Ad Content -->
                        <div class="absolute inset-0 p-6 flex flex-col justify-between text-white">
                            <!-- Logo -->
                            <div class="flex-shrink-0">
                                <img id="previewLogo" src="https://placehold.co/400x100/ffffff/334155?text=LOGO" class="h-8 md:h-10 w-auto bg-white p-1 rounded-sm">
                            </div>
                            
                            <!-- Text Content (centered) -->
                            <div class="flex-grow flex flex-col items-center justify-center text-center p-4">
                                <!-- Headline -->
                                <h1 id="previewHeadline" class="text-3xl md:text-5xl font-bold leading-tight shadow-text" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.7);"></h1>
                                
                                <!-- Bullets -->
                                <div id="previewBullets" class="text-lg md:text-2xl mt-4 font-medium leading-normal whitespace-pre-line shadow-text" style="text-shadow: 1px 1px 6px rgba(0,0,0,0.8);"></div>
                            </div>
                            
                            <!-- CTA Button -->
                            <div class="flex-shrink-0 w-full">
                                <div id="previewCta" class="bg-white text-gray-900 font-bold text-lg md:text-2xl text-center p-3 md:p-4 rounded-md w-full max-w-md mx-auto shadow-lg">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const conceptSelect = document.getElementById('conceptSelect');
        const aspectRatio = document.getElementById('aspectRatio');
        const imageUrl = document.getElementById('imageUrl');
        const logoUrl = document.getElementById('logoUrl');
        const headline = document.getElementById('headline');
        const bullets = document.getElementById('bullets');
        const cta = document.getElementById('cta');
        const downloadBtn = document.getElementById('downloadBtn');

        const adPreview = document.getElementById('adPreview');
        const previewBgImage = document.getElementById('previewBgImage');
        const previewLogo = document.getElementById('previewLogo');
        const previewHeadline = document.getElementById('previewHeadline');
        const previewBullets = document.getElementById('previewBullets');
        const previewCta = document.getElementById('previewCta');

        // Ad Concept Data (Based on our analysis)
        const adConcepts = [
            {
                name: "Optimized Winner (Data-Driven)",
                image: "https://placehold.co/1080x1080/596278/FFFFFF?text=Static+Ad+%231+Image",
                logo: "https://placehold.co/400x100/ffffff/334155?text=LOGO",
                headline: "PLAN. TRAIN. SUCCEED.",
                bullets: "â€¢ 700+ video exercises\nâ€¢ Get access to our coaching platform\nâ€¢ For players age 6-16",
                cta: "Try free for 14 days"
            },
            {
                name: "Authority Ad (Gidsel)",
                image: "https://placehold.co/1080x1080/B4A99E/FFFFFF?text=Mathias+Gidsel+Image",
                logo: "https://placehold.co/400x100/ffffff/334155?text=LOGO",
                headline: "Train your players with Mathias Gidsel",
                bullets: "â€¢ 700+ video exercises\nâ€¢ Ready-made training plans\nâ€¢ From the World's Best Player",
                cta: "Try free for 14 days. Sign up now!"
            },
            {
                name: "Pain Point Solution",
                image: "https://placehold.co/1080x1080/7B8B9C/FFFFFF?text=Confident+Coach+Image",
                logo: "https://placehold.co/400x100/ffffff/334155?text=LOGO",
                headline: "Coaching takes time. Planning doesn't have to.",
                bullets: "â€¢ 700+ ready-made video exercises\nâ€¢ Save hours every week\nâ€¢ Become their favorite coach",
                cta: "Try free for 14 days"
            }
        ];

        // Function to load a concept
        function loadConcept(index) {
            const concept = adConcepts[index];
            imageUrl.value = concept.image;
            logoUrl.value = concept.logo;
            headline.value = concept.headline;
            bullets.value = concept.bullets;
            cta.value = concept.cta;
            updatePreview();
        }

        // Function to update the preview
        function updatePreview() {
            previewBgImage.src = imageUrl.value;
            previewLogo.src = logoUrl.value;
            previewHeadline.innerText = headline.value;
            previewBullets.innerText = bullets.value;
            previewCta.innerText = cta.value;
        }

        // Function to handle aspect ratio change
        function updateAspectRatio() {
            if (aspectRatio.value === 'stories') {
                adPreview.classList.remove('ad-preview', 'w-full', 'max-w-lg');
                adPreview.classList.add('stories', 'w-full', 'max-w-xs', 'mx-auto'); // max-w-xs for better fit
            } else {
                adPreview.classList.remove('stories', 'max-w-xs', 'mx-auto');
                adPreview.classList.add('ad-preview', 'w-full', 'max-w-lg');
            }
        }
        
        // Function to download the ad preview
        function downloadAd() {
            html2canvas(adPreview, { 
                allowTaint: true, 
                useCORS: true, 
                logging: true,
                onclone: (doc) => {
                    // This helps ensure external images are loaded
                    const img = doc.getElementById('previewBgImage');
                    img.crossOrigin = "anonymous";
                }
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `learn_handball_ad_concept.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
            }).catch(err => {
                console.error("Error downloading image:", err);
                alert("Could not download image. If using an external image, check browser console for CORS errors.");
            });
        }

        // Event Listeners
        conceptSelect.addEventListener('change', (e) => loadConcept(e.target.value));
        aspectRatio.addEventListener('change', updateAspectRatio);
        imageUrl.addEventListener('input', updatePreview);
        logoUrl.addEventListener('input', updatePreview);
        headline.addEventListener('input', updatePreview);
        bullets.addEventListener('input', updatePreview);
        cta.addEventListener('input', updatePreview);
        downloadBtn.addEventListener('click', downloadAd);

        // Initial Load
        loadConcept(0);
        updateAspectRatio();
    </script>
</body>
</html>

